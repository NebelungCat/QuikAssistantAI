# QuikAssistantAI

QuikAssistantAI - это система автоматической торговли, интегрированная с торговой платформой QUIK. Ассистент анализирует рыночные данные и автоматически отправляет заявки на покупку и продажу ценных бумаг на основе данных из текстовых файлов формата CSV.

## Основные возможности системы:

1. Автоматическое выставление заявок в зависимости от времени суток
2. Поддержка нескольких брокеров (Финам, ВТБ, Промсвязьбанк, Россельхозбанк)
3. Работа с различными типами ценных бумаг (акции, облигации, иностранные бумаги)
4. Логирование всех операций
5. Обработка сделок и автоматическое закрытие позиций
6. Проверка корректности заявок перед выставлением

## Структура проекта:

- `main.lua` - Главный файл запуска ассистента
- `QuikAssistantAI.lua` - Основной модуль торгового ассистента
- `QuikAPI.lua` - Модуль для взаимодействия с API QUIK
- `CSVHandler.lua` - Модуль для обработки CSV файлов с торговыми сигналами
- `EventHandler.lua` - Модуль обработки событий QUIK (сделки, заявки, котировки)
- `SimpleStrategy.lua` - Пример пользовательской торговой стратегии
- `config.lua` - Файл стандартных настроек
- `user_config.lua` - Файл пользовательских настроек (опционально)
- `QuikAssistantAI_script.lua` - Скрипт для запуска в QUIK с обработчиками событий
- `trade_signals.csv` - Пример файла с торговыми сигналами
- `advanced_trade_signals.csv` - Пример файла с расширенными торговыми сигналами

## Установка и использование:

1. Скопируйте файлы в папку с LUA скриптами QUIK
2. Убедитесь, что QUIK запущен и подключен к серверу
3. Запустите скрипт через QUIK

## Формат CSV файла:

Файл должен содержать следующие колонки:
- `action` - действие (buy/sell или покупка/продажа)
- `class_code` - код класса инструмента (например, TQBR)
- `sec_code` - код ценной бумаги (например, SBER)
- `quantity` - количество бумаг
- `price` - цена
- `account` - номер счета (опционально)
- `client_code` - код клиента (опционально)

Дополнительные колонки:
- `order_type` - тип ордера (limit, market, stop и т.д.)
- `time` - время для фильтрации сигналов

## Пользовательские стратегии:

Ассистент поддерживает подключение пользовательских торговых стратегий через отдельные LUA модули. Пример стратегии находится в файле `SimpleStrategy.lua`. Стратегии могут генерировать торговые сигналы на основе анализа рыночных данных.

## Настройки:

Система использует файл `config.lua` для основных настроек:
- Время начала и окончания торгов
- Поддерживаемые брокеры
- Типы ценных бумаг
- Путь к файлу лога
- Ограничения по стоимости заявок

Для переопределения стандартных настроек можно использовать файл `user_config.lua`, который будет загружаться вместо стандартного файла конфигурации, если он существует.